---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# simpleMH

<!-- badges: start -->
[![Lifecycle: maturing](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![R-CMD-check](https://github.com/Bisaloo/simpleMH/workflows/R-CMD-check/badge.svg)](https://github.com/Bisaloo/simpleMH/actions)
[![Codecov test coverage](https://codecov.io/gh/Bisaloo/simpleMH/branch/main/graph/badge.svg)](https://codecov.io/gh/Bisaloo/simpleMH?branch=main)
<!-- badges: end -->

This package offers a very simple interface to use the Metropolis-Hastings Monte
Carlo Markov Chain algorithm. It is suitable for teaching and testing purposes.
For more advanced uses, you can for example use the
[mcmcensemble](https://bisaloo.github.io/mcmcensemble) package, which is 
designed with a very similar interface, but offers better convergence, 
especially for badly scaled problems or highly correlated set of parameters.

## Installation

You can install the development version from GitHub:

```{r, eval = FALSE}
# install.packages("remotes")
remotes::install_github("Bisaloo/simpleMH")
```

## Example

```{r example}
library(simpleMH)

## a log-pdf to sample from
p.log <- function(x) {
    B <- 0.03                              # controls 'bananacity'
    -x[1]^2/200 - 1/2*(x[2]+B*x[1]^2-100*B)^2
}

res <- simpleMH(
  p.log,
  inits = c(0, 0),
  theta.cov = diag(2),
  max.iter = 5000,
  coda = TRUE # to be able to have nice plots and diagnostics with the coda pkg
)
```

Here is the resulting sampling landscape of `p.log()`:

```{r sampling-landscape, dpi = 150}
plot(as.data.frame(res$samples))
```

We can then use the [coda package](https://cran.r-project.org/package=coda) to
post-process the chain (burn-in, thinning, etc.), plot the trace and density,
or compute convergence diagnostics:

```{r coda-plots, dpi = 150}
plot(res$samples)
```

